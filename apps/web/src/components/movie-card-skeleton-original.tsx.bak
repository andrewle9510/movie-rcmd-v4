import { Card, CardContent, CardHeader } from "@/components/ui/card";
import { Skeleton } from "@/components/ui/skeleton";

export type GridSize = "small" | "medium" | "large";

interface MovieCardSkeletonProps {
  gridSize?: GridSize;
  viewMode?: "grid" | "list";
}

export function MovieCardSkeleton({ 
  gridSize = "medium", 
  viewMode = "grid" 
}: MovieCardSkeletonProps) {
  const getCardClasses = () => {
    const baseClasses = "overflow-hidden transition-all duration-300";
    
    if (viewMode === "list") {
      return `flex flex-row ${baseClasses}`;
    }
    
    return baseClasses;
  };

  const getImageContainerClasses = () => {
    if (viewMode === "list") {
      return "relative w-24 h-36 flex-shrink-0 overflow-hidden";
    }
    
    return "relative aspect-[2/3] overflow-hidden";
  };

  const getCardContentClasses = () => {
    if (viewMode === "list") {
      return "flex-1 p-4";
    }
    
    return `p-${gridSize === "small" ? "2" : gridSize === "large" ? "6" : "4"}`;
  };

  return (
    <Card className={getCardClasses()}>
      <CardHeader className={viewMode === "list" ? "p-0" : "p-0"}>
        <div className={getImageContainerClasses()}>
          <Skeleton className="h-full w-full" />
        </div>
      </CardHeader>
      <CardContent className={getCardContentClasses()}>
        <div className="space-y-3">
          {/* Title */}
          <Skeleton 
            className={`${
              viewMode === "list" ? "h-6 w-3/4" : 
              gridSize === "small" ? "h-4 w-full" : 
              gridSize === "large" ? "h-8 w-11/12" : 
              "h-6 w-full"
            }`} 
          />
          
          {/* Description for larger views */}
          {(gridSize !== "small" || viewMode === "list") && (
            <div className="space-y-2">
              <Skeleton 
                className={`${
                  viewMode === "list" || gridSize === "large" ? "h-4 w-full" : "h-3 w-5/6"
                }`} 
              />
              <Skeleton 
                className={`${
                  viewMode === "list" || gridSize === "large" ? "h-4 w-5/6" : "h-3 w-4/6"
                }`} 
              />
              {(viewMode === "list" || gridSize === "large") && (
                <Skeleton className="h-4 w-4/6" />
              )}
            </div>
          )}
          
          {/* Genre badges */}
          <div className="flex flex-wrap gap-1">
            {[1, 2, 3].map((i) => (
              <Skeleton 
                key={i} 
                className={`${
                  gridSize === "small" ? "h-5 w-16" : "h-5 w-20"
                }`} 
              />
            ))}
          </div>
          
          {/* Rating and year */}
          <div className="flex justify-between items-center">
            <Skeleton className="h-4 w-12" />
            <Skeleton className="h-4 w-10" />
          </div>
          
          {/* Duration */}
          <Skeleton className="h-3 w-16" />
          
          {/* Watchlist button for large/list views */}
          {(gridSize === "large" || viewMode === "list") && (
            <Skeleton className="h-9 w-full" />
          )}
        </div>
      </CardContent>
    </Card>
  );
}
